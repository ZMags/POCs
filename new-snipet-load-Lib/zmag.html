<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv='content-type' content='text/html; charset=utf-8' />
  <title>Zmags Test Page</title>
  <script type='text/javascript' src='http://viewer.zmags.com/js/viewer.js'></script>
</head>
<body leftmargin=0 rightmargin=0 topmargin=0 bottommargin=0>

  <div id='viewerDiv'></div>

<script type='text/javascript'>

    /**
     * Default ID of publication to see.
     * @final
     */
    var defaultPublicationID = 'cce6e87c';

    /**
     * Default page number to show initially.
     * @final
     */
    var defaultPageNumber = 1;

    /**
     * Function to retrieve a potential query parameter from an URL.
     *
     * @param {String} name    Name of parameter to get value for.
     * @return Query parameter value for a given name.
     */
    function getQueryParameter(name) {
        var queryParameters = document.location.search;
        var returnValue = '';

        do { //This loop is made to catch all instances of any get variable.
            var keyIndex = queryParameters.indexOf(name + '=');
            if (keyIndex != -1) {
                queryParameters = queryParameters.substr(keyIndex + name.length + 1, queryParameters.length - keyIndex);
                var valueSeparatorPosition = queryParameters.indexOf('&');
                if (valueSeparatorPosition == -1) {
                    value = queryParameters;
                } else {
                    var value = queryParameters.substr(0, valueSeparatorPosition);
                }
                if (value == '' || returnValue == '') {
                    returnValue += value;
                }
                else {
                    returnValue += ', ' + value;
                }
            }

        }
        while (keyIndex != -1);

        //Restores all the blank spaces.
        var space = returnValue.indexOf('+');
        while (space != -1) {
            returnValue = returnValue.substr(0, space) + ' ' +
                    returnValue.substr(space + 1, returnValue.length);
            space = returnValue.indexOf('+');
        }
        return returnValue;
    }

    /**
     * Function to retrieve a potential query parameter from an URL and if not present use default value.
     *
     * @param {String} name    Name of parameter to get value for.
     * @param {String} defaultValue Default value to return if name value could not be returned.
     * @return Query parameter value for a given query parameter or default value provided in case query parameter could not be found.
     */
    function getParameterValue(name, defaultValue) {
        var parameterValue = getQueryParameter(name);
        if (parameterValue) {
            return parameterValue;
        } else {
            return defaultValue;
        }
    }

    var initialPublicationID = getParameterValue('id', defaultPublicationID);
    var pageNumber = getParameterValue('pagenumber', defaultPageNumber);

    var viewer = new ZMAGS.ui.Viewer();
    viewer.setPublicationID(initialPublicationID);    //identifier of publication
    viewer.setParentElementID('viewerDiv'); // element to insert Publication into
    viewer.setWindowMode('transparent');

    viewer.show();

    viewer.onpublicationopen = function(event) {
        setTimeout('viewer.gotoPage(pageNumber)', '700' );
    };

</script>


</body>
</html>